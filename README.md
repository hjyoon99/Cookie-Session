# 쿠키와 세션
## 쿠키와 세션을 왜 사용하나요?
- HTTP 환경은 “connectionless, stateless” 한 특성을 가지기 때문에 서버는 클라이언트가 누구인지 매번 확인해야 합니다. 이를 위해 쿠키와 세션 사용합니다.
### Connectionless
- 클라이언트가 요청을 한 후 응답을 받으면 그 연결을 끊어버리는 특징
### Stateless
- 통신이 끝나면 상태를 유지하지 않는 특징

## 쿠키란?
> - 클라이언트 로컬에 저장되어 있는 키/값 형태의 작은 데이터 파일
> - 사용자 인증이 유효한 시간 명시, 유효 시간이 정해지면 브라우저가 종료되어도 인증 유지
> - 클라이언트의 상태 정보를 로컬에 저장했다가 참조
> - 최대 300개의 쿠키 저장 가능, 도메인 당 20개의 값, 하나의 쿠키 당 4KB까지 저장

## 쿠키의 구성요소
- 이름
- 값
- 유효시간
- 도메인: 쿠키를 전송 할 도메인
- 경로: 쿠키를 전송 할 요청 경로

## 쿠키 동작 방식
1. 클라이언트가 페이지를 요청
2. 서버에서 쿠키 생성
3. HTTP 헤더에 쿠키를 포함시켜 응답
4. 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관
5. 같은 요청 시 HTTP 헤더에 쿠키를 함께 보냄
6. 서버에서 쿠키를 읽어 이전 상태 정보를 변경 할 필요가 있을 때 쿠키를 업데이트 해 변경된 쿠키를 HTTP 헤더에 포함시켜 응답

### 사용 예
> - 로그인 시 “아이디와 비밀번호 저장하시겠습니까?”
> - 쇼핑몰 장바구니 기능
> - 자동 로그인 시 “오늘 더 이상 이 창을 보지 않음” 등

## 세션이란?
> -  세션은 쿠키를 기반하고 있음. 그러나 쿠키는 사용자 정보 파일을 브라우저에 저장, 세션은 서버 측에서 관리
> - 서버에서는 클라이언트 구분을 위해 세션 ID를 부여하고 웹 브라우저가 서버에 접속해서 브라우저를 종료할 때까지 인증상태 유지
> - 접속 시간 제한 가능
> - 쿠키보다 보안은 좋으나, 사용자 많아질 수록 서버 메모리 부하

## 세션 동작 방식
1. 클라이언트가 서버 접속 시 세션 ID 발급
2. 클라이언트는 세션 ID에 대해 쿠키를 사용해 저장
3. 클라이언트는 서버에 요청할 때, 이 쿠키 세션 ID를 같이 서버에 전달해 요청
4. 서버는 세션 ID를 전달 받아 세션에 있는 클라이언트 정보 가져와 사용
5. 클라이언트 정보를 가지고 서버 요청 처리, 응답

## 세션 특징
> - 각 클라이언트에 고유 ID부여
> - 세션 ID로 클라이언트를 구분해 클라이언트 요구에 맞는 서비스 제공
> - 보안 면에서 쿠키보다 우수
> -  사용자 많아질 수록 서버 메모리 부하

### 사용 예
> - 로그인처럼 보안 상 중요 작업 수행 시 사용

## 쿠키와 세션의 차이?
- 쿠키 세션은 비슷함. 세션도 결국 쿠키 사용.
- 정보 저장 위치 : 쿠키 -> 브라우저, 세션 -> 서버
- 보안 : 세션 > 쿠키
- 속도 : 세션 < 쿠키

## 세션이 더 빠른데 굳이 왜 쿠키를 사용할까요???
> 세션은 서버의 자원을 사용해서 무분별하게 만들면 서버의 메모리 과부하를 야기할 수 있습니다. 이렇게 되면, 속도가 느려지기 때문에 빠른 속도를 요구하는 업무에서는 쿠키가 유리하기도 합니다.
